<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>２スウ１２ヤク</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* 落ち着いたカジノのような配色 */
            --bg-color: #2e7d32; /* 深いグリーン (カジノテーブル) */
            --container-bg: #4caf50; /* 少し明るいグリーン */
            --main-text-color: #eceff1; /* 非常に淡いグレー */
            --border-color: #66bb6a; /* 明るいグリーン */
            --accent-color-dark: #b71c1c; /* 深い赤 (アクセント) */
            --card-color-bg: #f5f5f5; /* カードの白 */
            --card-color-border: #9e9e9e; /* カードのグレー枠 */
            --lamp-off-bg: #616161; /* 暗いグレー */
            --lamp-off-border: #9e9e9e;
            --lamp-lit-color: #ffd700; /* ゴールド */
            --lamp-lit-shadow: 0 0 25px var(--lamp-lit-color), inset 0 0 10px rgba(255, 255, 255, 0.7);
            --title-frame-color: #45b26b; /* #a98e72; から変更 */

            /* サイズ設定 (全体を80%に縮小) */
            --scale-factor: 0.8;
            --card-size: calc(65px * var(--scale-factor));
            --lamp-size: calc(55px * var(--scale-factor));
            --gap-size: calc(15px * var(--scale-factor));
            --border-radius: calc(12px * var(--scale-factor));
            --small-border-radius: calc(6px * var(--scale-factor));
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            color: var(--main-text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            user-select: none;
            overflow: hidden;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgMTIwIDEyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0aCBpZD0icGF0dGVybi1kb3QiIGQ9Ik02MCwwYTUsNSAwIDEwMCAxMDAsNSAwIDEtMCA1LTV6Ii8+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIwIiB5PSIwIj48dXNlIHhsaW5rOmhyZWY9IiNwYXR0ZXJuLWRvdCIgeD0iMCIgeT0iMCIgZmlsbD0iIzQwYTBiYSIvPjx1c2UgeGxpbms6aHJlZj0iI3BhdHRlcm4tZG90IiB4PSI2MCIgeT0iMCIgZmlsbD0iIzQwYTBiYSIvPjx1c2UgeGxpbms6aHJlZj0iI3BhdHRlcm4tZG90IiB4PSIwIiB5PSI2MCIgZmlsbD0iIzQwYTBiYSIvPjx1c2UgeGxsaW5rOmhyZWY9IiNwYXR0ZXJuLWRvdCIgeD0iNjAiIHk9IjYwIiBmaWxsPSIjNDBhMGJhIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+');
            background-size: 60px 60px;
            background-blend-mode: multiply;
            transform: scale(var(--scale-factor));
            transform-origin: center center;
        }

        #game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: calc(25px * var(--scale-factor));
            padding: calc(35px * var(--scale-factor));
            background-color: var(--container-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 calc(12px * var(--scale-factor)) calc(35px * var(--scale-factor)) rgba(0,0,0,0.3);
            max-width: calc(90vw * var(--scale-factor));
            width: calc(800px * var(--scale-factor));
            border: calc(5px * var(--scale-factor)) solid var(--title-frame-color); /* 落ち着いた色の枠 */
        }

        h1 {
            font-family: 'Playfair Display', serif;
            margin: 0 0 calc(15px * var(--scale-factor)) 0;
            font-size: calc(3.5em * var(--scale-factor));
            color: #bbee88; /* var(--title-frame-color); から変更 */
            letter-spacing: calc(2px * var(--scale-factor));
            font-weight: 700;
            text-shadow: 0 calc(3px * var(--scale-factor)) calc(8px * var(--scale-factor)) rgba(0,0,0,0.4);
        }

        #lamp-grid {
            display: grid;
            grid-template-columns: repeat(6, var(--lamp-size));
            grid-template-rows: repeat(2, var(--lamp-size));
            gap: var(--gap-size);
            padding: calc(15px * var(--scale-factor));
            background-color: #388e3c;
            border-radius: var(--border-radius);
            box-shadow: inset 0 calc(3px * var(--scale-factor)) calc(8px * var(--scale-factor)) rgba(0,0,0,0.2);
            border: calc(2px * var(--scale-factor)) solid #81c784;
        }

        .lamp {
            width: var(--lamp-size);
            height: var(--lamp-size);
            background-color: var(--lamp-off-bg);
            border-radius: 50%;
            transition: background-color 0.4s ease-out, box-shadow 0.4s ease-out, border-color 0.4s ease-out;
            border: calc(3px * var(--scale-factor)) solid var(--lamp-off-border);
            box-shadow: inset 0 calc(2px * var(--scale-factor)) calc(4px * var(--scale-factor)) rgba(0,0,0,0.15);
        }

        .lamp.lit {
            background-color: var(--lamp-lit-color);
            box-shadow: var(--lamp-lit-shadow);
            border-color: #ffc107;
        }

        #set-areas-container {
            display: flex;
            gap: var(--gap-size);
            margin-top: calc(10px * var(--scale-factor));
        }

        .set-area {
            display: flex;
            justify-content: center; /* 中央揃えを追加 */
            align-items: center;
            gap: calc(8px * var(--scale-factor));
            padding: calc(8px * var(--scale-factor)) calc(10px * var(--scale-factor));
            border-radius: var(--small-border-radius);
            min-width: calc((var(--card-size) * 3) + (calc(8px * var(--scale-factor)) * 2) + (calc(20px * var(--scale-factor))));
            height: calc(var(--card-size) + calc(10px * var(--scale-factor)));
            background-color: #43a047;
            box-shadow: inset 0 calc(1px * var(--scale-factor)) calc(3px * var(--scale-factor)) rgba(0,0,0,0.2);
        }
        
        .card-placeholder {
            width: var(--card-size);
            height: var(--card-size);
            border: calc(2px * var(--scale-factor)) dashed rgba(255, 255, 255, 0.4);
            border-radius: var(--small-border-radius);
            box-sizing: border-box;
        }

        .card {
            width: var(--card-size);
            height: var(--card-size);
            background-color: var(--card-color-bg);
            border: calc(2px * var(--scale-factor)) solid var(--card-color-border);
            border-radius: var(--small-border-radius);
            box-sizing: border-box; /* ブレ防止のため追加 */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: calc(2.5em * var(--scale-factor));
            font-weight: 700;
            color: var(--accent-color-dark);
            cursor: pointer;
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out, background-color 0.2s ease-out;
            box-shadow: 0 calc(3px * var(--scale-factor)) calc(8px * var(--scale-factor)) rgba(0,0,0,0.2);
        }

        .card:hover {
            transform: translateY(calc(-5px * var(--scale-factor)));
            box-shadow: 0 calc(10px * var(--scale-factor)) calc(20px * var(--scale-factor)) rgba(0,0,0,0.3);
            background-color: #ffee58;
            border-color: #ffc107;
        }

        #standby-area {
            display: flex;
            gap: var(--gap-size);
            padding: calc(20px * var(--scale-factor));
            border: calc(3px * var(--scale-factor)) solid #aed581;
            border-radius: var(--border-radius);
            min-height: calc(var(--card-size) + calc(40px * var(--scale-factor)));
            width: calc(90% * var(--scale-factor));
            justify-content: center;
            align-content: center; /* 垂直中央揃えを追加 */
            flex-wrap: wrap;
            background-color: #4caf50;
            box-shadow: inset 0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) rgba(0,0,0,0.15);
        }
        
        #clear-message {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            color: var(--lamp-lit-color);
            font-size: calc(15vw * var(--scale-factor));
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            display: none;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            animation: fadeIn 0.6s ease-out;
            letter-spacing: calc(8px * var(--scale-factor));
            text-shadow: 0 calc(5px * var(--scale-factor)) calc(15px * var(--scale-factor)) rgba(255,215,0,0.6);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

    </style>
</head>
<body>

    <div id="game-container">
        <h1>２スウ１２ヤク</h1>
        <div id="lamp-grid"></div>
        <div id="set-areas-container">
            <div class="set-area" data-area-id="0"></div>
            <div class="set-area" data-area-id="1"></div>
        </div>
        <div id="standby-area"></div>
    </div>

    <div id="clear-message">CLEAR!</div>

    <script>
        const lampGrid = document.getElementById('lamp-grid');
        const setAreas = document.querySelectorAll('.set-area');
        const standbyArea = document.getElementById('standby-area');
        const clearMessage = document.getElementById('clear-message');

        const initialCards = [0, 1, 2, 3, 4, 5, 6];
        let standbyCards = [...initialCards];

        function createCard(number) {
            const card = document.createElement('div');
            card.className = 'card';
            card.textContent = number;
            card.dataset.value = number;
            card.addEventListener('click', moveCardToStandbyArea);
            return card;
        }
        
        function createPlaceholder() {
            const placeholder = document.createElement('div');
            placeholder.className = 'card-placeholder';
            return placeholder;
        }

        function renderStandbyCards() {
            standbyArea.innerHTML = '';
            standbyCards.sort((a, b) => a - b);
            standbyCards.forEach(num => {
                const card = createCard(num);
                card.removeEventListener('click', moveCardToStandbyArea); // remove listener for standby
                card.addEventListener('click', moveCardToSetArea);
                standbyArea.appendChild(card);
            });
        }
        
        function moveCardToSetArea(event) {
            const value = parseInt(event.target.dataset.value, 10);
            const targetPlaceholder = document.querySelector('.card-placeholder');

            if (targetPlaceholder) {
                standbyCards = standbyCards.filter(n => n !== value);
                renderStandbyCards();

                const newCard = createCard(value);
                targetPlaceholder.parentElement.replaceChild(newCard, targetPlaceholder);
                
                updateGame();
            }
        }

        function moveCardToStandbyArea(event) {
            const card = event.target;
            const value = parseInt(card.dataset.value, 10);
            
            standbyCards.push(value);
            renderStandbyCards();

            const placeholder = createPlaceholder();
            card.parentElement.replaceChild(placeholder, card);
            
            updateGame();
        }

        let clearTimeoutId = null;

        function updateGame() {
            const numbers = Array.from(setAreas).map(area => {
                if (area.querySelector('.card-placeholder')) {
                    return null;
                }
                
                let numStr = '';
                for (const card of area.children) {
                    numStr += card.textContent;
                }
                return parseInt(numStr, 10);
            });

            let litCount = 0;
            for (let i = 1; i <= 12; i++) {
                const lamp = document.getElementById(`lamp-${i}`);
                let isLit = false;
                numbers.forEach(num => {
                    if (num !== null && num > 0 && num % i === 0) {
                        isLit = true;
                    }
                });

                if (isLit) {
                    lamp.classList.add('lit');
                    litCount++;
                } else {
                    lamp.classList.remove('lit');
                }
            }
            
            if (litCount === 12) {
                if (!clearMessage.style.display || clearMessage.style.display === 'none') {
                     clearTimeoutId = setTimeout(() => {
                        clearMessage.style.display = 'flex';
                    }, 500);
                }
            } else {
                if (clearTimeoutId) {
                    clearTimeout(clearTimeoutId);
                    clearTimeoutId = null;
                }
                clearMessage.style.display = 'none';
            }
        }

        function init() {
            for (let i = 1; i <= 12; i++) {
                const lamp = document.createElement('div');
                lamp.className = 'lamp';
                lamp.id = `lamp-${i}`;
                lampGrid.appendChild(lamp);
            }
            
            setAreas.forEach(area => {
                for (let i = 0; i < 3; i++) {
                    area.appendChild(createPlaceholder());
                }
            });

            renderStandbyCards();
            
            clearMessage.addEventListener('click', () => {
                clearMessage.style.display = 'none';
            });
        }
        
        init();
    </script>

</body>
</html>



