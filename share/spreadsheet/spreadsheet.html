<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Excelåˆ†æãƒ­ã‚¸ãƒƒã‚¯ãƒ»ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚° Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .cell {
            width: 120px;
            height: 32px;
            border: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            padding: 0 8px;
            font-size: 13px;
            background: white;
            user-select: none;
            cursor: cell;
            overflow: hidden;
            white-space: nowrap;
        }
        .cell.header {
            background: #f1f5f9;
            font-weight: bold;
            justify-content: center;
            cursor: default;
        }
        .cell.selected {
            background: #e0f2fe;
            outline: 2px solid #3b82f6;
            z-index: 10;
        }
        .excel-grid {
            display: grid;
            grid-template-columns: 40px repeat(5, 120px);
            width: fit-content;
            border-top: 1px solid #cbd5e1;
            border-left: 1px solid #cbd5e1;
        }
        .row-num {
            width: 40px;
            background: #f1f5f9;
            border-right: 1px solid #cbd5e1;
            border-bottom: 1px solid #cbd5e1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: #64748b;
        }
        /* è¨ˆç®—çµæœãŒå…¥ã‚‹äºˆå®šã®å ´æ‰€ */
        .target-slot {
            background: #fefce8;
            border: 2px dashed #facc15;
            color: #a16207;
            font-size: 10px;
            justify-content: center;
        }
        .result-cell {
            background: #f0fdf4 !important;
            color: #166534 !important;
            font-weight: bold;
            border: 2px solid #22c55e !important;
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen font-sans">

    <div class="max-w-6xl mx-auto p-4 md:p-8">
        <!-- Header -->
        <div class="bg-white rounded-t-xl shadow-sm border border-slate-200 p-6 mb-0">
            <div class="flex flex-wrap justify-between items-center gap-4 mb-4">
                <h1 class="text-2xl font-black text-slate-800 flex items-center gap-2">
                    <span class="bg-green-600 text-white px-2 py-1 rounded">X</span>
                    ãƒ‡ãƒ¼ã‚¿åˆ†ææ€è€ƒãƒ†ã‚¹ãƒˆ
                </h1>
                <div class="flex items-center gap-2">
                    <label for="stage-select" class="text-sm font-bold text-slate-500">STAGE:</label>
                    <select id="stage-select" class="bg-slate-100 border border-slate-300 rounded px-3 py-1 text-sm font-bold outline-none focus:ring-2 focus:ring-blue-500">
                    </select>
                </div>
            </div>
            
            <div id="mission-box" class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                <h2 class="text-blue-800 font-bold mb-1">ç¾åœ¨ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ï¼š</h2>
                <p id="mission-text" class="text-blue-900 text-lg"></p>
            </div>
        </div>

        <!-- Toolbar -->
        <div class="flex items-center gap-1 p-3 bg-white border-x border-slate-200 overflow-x-auto shadow-sm">
            <button id="btn-sum" class="op-btn px-3 py-2 bg-slate-100 hover:bg-blue-100 border border-slate-300 rounded text-xs font-bold transition-colors flex items-center gap-1" data-op="SUM">
                <span class="text-blue-600 text-lg">Î£</span> åˆè¨ˆ
            </button>
            <button id="btn-sub" class="op-btn px-3 py-2 bg-slate-100 hover:bg-blue-100 border border-slate-300 rounded text-xs font-bold transition-colors flex items-center gap-1" data-op="SUB">
                <span class="text-red-600 text-lg">-</span> å¼•ç®—
            </button>
            <button id="btn-mul" class="op-btn px-3 py-2 bg-slate-100 hover:bg-blue-100 border border-slate-300 rounded text-xs font-bold transition-colors flex items-center gap-1" data-op="MUL">
                <span class="text-purple-600 text-lg">Ã—</span> æ›ç®—
            </button>
            <button id="btn-div" class="op-btn px-3 py-2 bg-slate-100 hover:bg-blue-100 border border-slate-300 rounded text-xs font-bold transition-colors flex items-center gap-1" data-op="DIV">
                <span class="text-orange-600 text-lg">Ã·</span> é™¤ç®—
            </button>
            
            <div class="h-6 w-px bg-slate-300 mx-2"></div>
            
            <button id="btn-ok" class="px-6 py-2 bg-green-600 text-white rounded text-sm font-bold hover:bg-green-700 hidden">
                å®Ÿè¡Œ (OK)
            </button>
            <button id="btn-cancel" class="px-4 py-2 bg-slate-200 text-slate-700 rounded text-sm font-bold hover:bg-slate-300 hidden">
                å–æ¶ˆ
            </button>
            
            <div class="flex-grow"></div>
            
            <button id="btn-answer" class="px-8 py-2 bg-indigo-600 text-white rounded text-sm font-bold hover:bg-indigo-700 shadow-md">
                å›ç­”ã‚’æå‡ºã™ã‚‹
            </button>
        </div>

        <!-- Grid Container -->
        <div class="bg-white border border-slate-200 shadow-sm p-6 overflow-auto min-h-[400px]">
            <div id="status-bar" class="mb-4 text-[10px] font-bold text-slate-400 flex justify-between uppercase tracking-widest">
                <span id="mode-text">READY</span>
                <span id="selection-info">NO SELECTION</span>
            </div>
            <div class="excel-grid" id="excel-grid">
            </div>
            
            <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="p-4 bg-slate-50 rounded-lg border border-slate-200">
                    <h3 class="text-sm font-bold text-slate-700 mb-2 flex items-center gap-2">
                        <span>ğŸ’¡</span> åˆ†æã®ãƒ’ãƒ³ãƒˆ
                    </h3>
                    <p id="hint-text" class="text-xs text-slate-600 leading-relaxed"></p>
                </div>
                <div class="p-4 bg-amber-50 rounded-lg border border-amber-200">
                    <h3 class="text-sm font-bold text-amber-800 mb-2 flex items-center gap-2">
                        <span>ğŸ“</span> è¨ˆç®—ãƒ­ã‚°
                    </h3>
                    <div id="calc-history" class="text-xs text-amber-900 font-mono space-y-1 max-h-[100px] overflow-y-auto">
                        è¨ˆç®—çµæœãŒã“ã“ã«è¨˜éŒ²ã•ã‚Œã¾ã™...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div id="overlay" class="fixed inset-0 bg-slate-900/80 hidden flex items-center justify-center z-50 p-4">
        <div class="bg-white p-8 rounded-2xl shadow-2xl text-center max-w-md w-full">
            <div id="overlay-icon" class="text-6xl mb-4"></div>
            <h2 id="overlay-title" class="text-2xl font-bold mb-2 text-slate-800"></h2>
            <p id="overlay-message" class="text-slate-600 mb-8"></p>
            <button id="overlay-btn" class="w-full py-4 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition shadow-lg">
                NEXT
            </button>
        </div>
    </div>

    <script>
        const stages = [
            {
                title: "1. ã‚´ãƒ¼ãƒ«ã®æˆåŠŸç‡ï¼ˆé †ä½ä»˜ã‘ï¼‰",
                mission: "æˆåŠŸç‡ãŒä¸€ç•ªé«˜ã„ã®ã¯èª°ã§ã™ã‹ï¼Ÿ Aåˆ—ã®äººç‰©åã‚’é¸æŠã—ã¦å›ç­”ã—ã¦ãã ã•ã„ã€‚",
                hint: "Dåˆ—ã®ã€Œã“ã“ã«çµæœã€ã‚»ãƒ«ã‚’é †ç•ªã«åŸ‹ã‚ã¾ã—ã‚‡ã†ã€‚ã™ã¹ã¦åŸ‹ã¾ã‚‹ã¨ã€Eåˆ—ã«è‡ªå‹•çš„ã«é †ä½ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚é †ä½ãŒã€Œ1ã€ã®äººã‚’é¸ã‚“ã§ãã ã•ã„ã€‚",
                cols: 5,
                data: [
                    ['äººç‰©', 'ã‚´ãƒ¼ãƒ«æ•°', 'ã‚·ãƒ¥ãƒ¼ãƒˆæ•°', 'æˆåŠŸç‡', 'é †ä½'],
                    ['ç”°ä¸­', 5, 10, '', '?'],
                    ['ä½è—¤', 8, 20, '', '?'],
                    ['éˆ´æœ¨', 3, 4, '', '?'],
                    ['', '', '', '', ''],
                ],
                resultSlots: [{r: 1, c: 3}, {r: 2, c: 3}, {r: 3, c: 3}],
                check: (val) => val === "éˆ´æœ¨",
                specialLogic: "ranking"
            },
            {
                title: "2. ã‚«ãƒ¬ãƒ¼ã®æ”¯æŒç‡",
                mission: "ã‚«ãƒ¬ãƒ¼ãŒå¥½ããªäººã¯å…¨ä½“ã®ä½•%ã§ã™ã‹ï¼Ÿ (å°æ•°ã§å›ç­”)",
                hint: "ã¾ãšB6ã«åˆè¨ˆã‚’å‡ºã—ã€æ¬¡ã«C2ã«å‰²åˆã‚’å‡ºã—ã¾ã—ã‚‡ã†ã€‚",
                cols: 4,
                data: [
                    ['æ–™ç†', 'äººæ•°', 'å‰²åˆ', ''],
                    ['ã‚«ãƒ¬ãƒ¼', 45, '', ''],
                    ['å¯¿å¸', 30, '', ''],
                    ['ãƒ©ãƒ¼ãƒ¡ãƒ³', 50, '', ''],
                    ['ãƒãƒ³ãƒãƒ¼ã‚°', 25, '', ''],
                    ['åˆè¨ˆ', '', '', ''],
                    ['', '', '', ''],
                ],
                resultSlots: [{r: 5, c: 1}, {r: 1, c: 2}],
                check: (val) => Math.abs(val - 0.3) < 0.01
            },
            {
                title: "3. ç‰¹å®šã‚«ãƒ†ã‚´ãƒªã®æŠ½å‡º",
                mission: "ã€Œé£²ã¿ç‰©ã€ã ã‘ã®åˆè¨ˆå£²ä¸Šã‚’ç®—å‡ºã—ã¦ãã ã•ã„ã€‚",
                hint: "ã‚«ãƒ†ã‚´ãƒªãŒé£²ã¿ç‰©ã®ã‚»ãƒ«ï¼ˆC2, C4, C6ï¼‰ã‚’é¸æŠã—ã¦ã€C8ã«åˆè¨ˆã‚’å‡ºã—ã¾ã—ã‚‡ã†ã€‚",
                cols: 4,
                data: [
                    ['ã‚«ãƒ†ã‚´ãƒª', 'å•†å“å', 'å£²ä¸Š', ''],
                    ['é£²ã¿ç‰©', 'ã‚³ãƒ¼ãƒ’ãƒ¼', 450, ''],
                    ['é£Ÿã¹ç‰©', 'ã‚µãƒ³ãƒ‰ã‚¤ãƒƒãƒ', 600, ''],
                    ['é£²ã¿ç‰©', 'ç´…èŒ¶', 380, ''],
                    ['é£Ÿã¹ç‰©', 'ã‚«ãƒ¬ãƒ¼', 850, ''],
                    ['é£²ã¿ç‰©', 'ã‚ªãƒ¬ãƒ³ã‚¸J', 300, ''],
                    ['åˆè¨ˆ', '', '', ''],
                    ['', '', '', ''],
                ],
                resultSlots: [{r: 7, c: 2}],
                check: (val) => val === 1130
            },
            {
                title: "4. ç´”åˆ©ç›Šã®è¨ˆç®—",
                mission: "å£²ä¸Šã‹ã‚‰çµŒè²»ï¼ˆåŸä¾¡ã¨äººä»¶è²»ï¼‰ã‚’å¼•ã„ã¦ã€Œåˆ©ç›Šã€ã‚’ç®—å‡ºã—ã¦ãã ã•ã„ã€‚",
                hint: "ã€Œå¼•ç®—ã€ãƒ¢ãƒ¼ãƒ‰ã§B2ã€B3ã€B4ã®é †ã«é¸æŠã—ã€B6ã«çµæœã‚’å‡ºã—ã¾ã—ã‚‡ã†ã€‚",
                cols: 4,
                data: [
                    ['é …ç›®', 'é‡‘é¡', '', ''],
                    ['ç·å£²ä¸Š', 15000, '', ''],
                    ['ä»•å…¥åŸä¾¡', 7000, '', ''],
                    ['äººä»¶è²»', 3000, '', ''],
                    ['åˆ©ç›Š', '', '', ''],
                    ['', '', '', ''],
                    ['', '', '', ''],
                ],
                resultSlots: [{r: 5, c: 1}],
                check: (val) => val === 5000
            },
            {
                title: "5. åœ¨åº«ã®ç·ä¾¡å€¤",
                mission: "ãƒªãƒ³ã‚´ã®åœ¨åº«é‡‘é¡ï¼ˆå˜ä¾¡ Ã— å€‹æ•°ï¼‰ã‚’å‡ºã—ã¦ãã ã•ã„ã€‚",
                hint: "å˜ä¾¡(B2)ã¨å€‹æ•°(C2)ã‚’æ›ã‘ã¦ã€D2ã«çµæœã‚’å‡ºã—ã¾ã™ã€‚",
                cols: 4,
                data: [
                    ['å•†å“', 'å˜ä¾¡', 'å€‹æ•°', 'åœ¨åº«é‡‘é¡'],
                    ['ãƒªãƒ³ã‚´', 150, 80, ''],
                    ['ãƒŸã‚«ãƒ³', 100, 120, ''],
                    ['', '', '', ''],
                    ['', '', '', ''],
                    ['', '', '', ''],
                ],
                resultSlots: [{r: 1, c: 3}],
                check: (val) => val === 12000
            }
        ];

        let currentStageIdx = 0;
        let cells = [];
        let isDragging = false;
        let startPos = null;
        let selectedCells = [];
        let currentOp = null;
        let history = [];
        let calcCount = 0;

        const gridElement = document.getElementById('excel-grid');
        const stageSelect = document.getElementById('stage-select');
        const missionText = document.getElementById('mission-text');
        const hintText = document.getElementById('hint-text');
        const statusBar = document.getElementById('mode-text');
        const selectionInfo = document.getElementById('selection-info');
        const btnOk = document.getElementById('btn-ok');
        const btnCancel = document.getElementById('btn-cancel');
        const btnAnswer = document.getElementById('btn-answer');
        const historyEl = document.getElementById('calc-history');

        stages.forEach((s, idx) => {
            const opt = document.createElement('option');
            opt.value = idx;
            opt.textContent = s.title;
            stageSelect.appendChild(opt);
        });

        stageSelect.addEventListener('change', (e) => {
            currentStageIdx = parseInt(e.target.value);
            initStage();
        });

        function initStage() {
            const stage = stages[currentStageIdx];
            missionText.textContent = stage.mission;
            hintText.textContent = stage.hint;
            history = [];
            calcCount = 0;
            historyEl.innerHTML = 'è¨ˆç®—çµæœãŒã“ã“ã«è¨˜éŒ²ã•ã‚Œã¾ã™...';
            renderGrid(stage);
            setMode(null);
        }

        function renderGrid(stage) {
            const { data, resultSlots, cols } = stage;
            gridElement.style.gridTemplateColumns = `40px repeat(${cols}, 120px)`;
            gridElement.innerHTML = '';
            cells = [];
            gridElement.appendChild(createDiv('', 'row-num'));
            for(let i=0; i<cols; i++) gridElement.appendChild(createDiv(String.fromCharCode(65+i), 'cell header'));

            for(let r=0; r<data.length; r++) {
                gridElement.appendChild(createDiv(r+1, 'row-num'));
                cells[r] = [];
                for(let c=0; c<cols; c++) {
                    const val = data[r][c];
                    const cell = createDiv(val, 'cell');
                    cell.dataset.r = r;
                    cell.dataset.c = c;
                    
                    const isSlot = resultSlots.some(s => s.r === r && s.c === c);
                    if (isSlot && val === '') {
                        cell.classList.add('target-slot');
                        cell.textContent = "ã“ã“ã«çµæœ";
                    }

                    cell.addEventListener('mousedown', (e) => onMouseDown(r, c));
                    cell.addEventListener('mouseover', (e) => onMouseOver(r, c));
                    gridElement.appendChild(cell);
                    cells[r][c] = cell;
                }
            }
        }

        function createDiv(text, className) {
            const div = document.createElement('div');
            div.className = className;
            div.textContent = text;
            return div;
        }

        function onMouseDown(r, c) {
            isDragging = true;
            startPos = {r, c};
            if (currentOp) {
                toggleCell(r, c);
            } else {
                selectedCells = [{r, c}];
                refreshCellStyles();
            }
        }

        function onMouseOver(r, c) {
            if (!isDragging || currentOp) return;
            selectedCells = [];
            const minR = Math.min(startPos.r, r);
            const maxR = Math.max(startPos.r, r);
            const minC = Math.min(startPos.c, c);
            const maxC = Math.max(startPos.c, c);
            for(let i=minR; i<=maxR; i++) {
                for(let j=minC; j<=maxC; j++) {
                    if (cells[i] && cells[i][j]) selectedCells.push({r:i, c:j});
                }
            }
            refreshCellStyles();
        }

        function toggleCell(r, c) {
            const idx = selectedCells.findIndex(p => p.r === r && p.c === c);
            if (idx > -1) selectedCells.splice(idx, 1);
            else selectedCells.push({r, c});
            refreshCellStyles();
        }

        function refreshCellStyles() {
            cells.forEach(row => row.forEach(c => c.classList.remove('selected')));
            selectedCells.forEach(p => cells[p.r][p.c].classList.add('selected'));
            
            if (selectedCells.length === 0) selectionInfo.textContent = "é¸æŠãªã—";
            else if (selectedCells.length === 1) selectionInfo.textContent = getLabel(selectedCells[0]);
            else selectionInfo.textContent = `${selectedCells.length} ã‚»ãƒ«é¸æŠä¸­`;

            if(currentOp) statusBar.textContent = `${currentOp}: ${selectedCells.length}å€‹é¸æŠä¸­ã€‚OKã§å®Ÿè¡Œ`;
        }

        function getLabel(pos) {
            return String.fromCharCode(65 + pos.c) + (pos.r + 1);
        }

        window.addEventListener('mouseup', () => isDragging = false);

        document.querySelectorAll('.op-btn').forEach(btn => {
            btn.addEventListener('click', () => setMode(btn.dataset.op));
        });

        function setMode(op) {
            currentOp = op;
            document.querySelectorAll('.op-btn').forEach(b => b.classList.remove('bg-blue-600', 'text-white'));
            if (op) {
                document.querySelector(`[data-op="${op}"]`).classList.add('bg-blue-600', 'text-white');
                btnOk.classList.remove('hidden');
                btnCancel.classList.remove('hidden');
                selectedCells = [];
                refreshCellStyles();
            } else {
                btnOk.classList.add('hidden');
                btnCancel.classList.add('hidden');
                statusBar.textContent = "READY";
            }
        }

        btnCancel.addEventListener('click', () => setMode(null));

        btnOk.addEventListener('click', () => {
            if (selectedCells.length === 0) return;
            const values = selectedCells.map(p => parseFloat(cells[p.r][p.c].textContent)).filter(v => !isNaN(v));
            if (values.length === 0) return;

            let result = 0;
            let logMsg = "";
            switch(currentOp) {
                case 'SUM': result = values.reduce((a, b) => a + b, 0); logMsg = `SUM = ${result}`; break;
                case 'SUB': result = values[0]; for(let i=1; i<values.length; i++) result -= values[i]; logMsg = `SUB = ${result}`; break;
                case 'MUL': result = values.reduce((a, b) => a * b, 1); logMsg = `MUL = ${result}`; break;
                case 'DIV': if(values.length < 2) return; result = values[0] / values[1]; logMsg = `DIV = ${result.toFixed(4)}`; break;
            }

            const stage = stages[currentStageIdx];
            if (calcCount < stage.resultSlots.length) {
                const target = stage.resultSlots[calcCount];
                const cell = cells[target.r][target.c];
                cell.textContent = Number.isInteger(result) ? result : result.toFixed(4);
                cell.classList.remove('target-slot');
                cell.classList.add('result-cell');
                calcCount++;

                // ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ­ã‚¸ãƒƒã‚¯ï¼šé †ä½æ›´æ–°
                if (stage.specialLogic === "ranking") updateRanking(stage);
            }

            if(history.length === 0) historyEl.innerHTML = '';
            const div = document.createElement('div');
            div.textContent = "> " + logMsg;
            historyEl.prepend(div);
            setMode(null);
        });

        function updateRanking(stage) {
            const rows = stage.resultSlots.map(s => s.r);
            const results = rows.map(r => ({
                row: r,
                val: parseFloat(cells[r][3].textContent)
            }));

            // ã™ã¹ã¦åŸ‹ã¾ã£ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
            if (results.some(res => isNaN(res.val))) return;

            // é™é †ã‚½ãƒ¼ãƒˆ
            const sorted = [...results].sort((a, b) => b.val - a.val);
            
            results.forEach(res => {
                const rank = sorted.findIndex(s => s.row === res.row) + 1;
                cells[res.row][4].textContent = rank;
                cells[res.row][4].classList.add('font-bold', 'text-blue-600');
            });
        }

        btnAnswer.addEventListener('click', () => {
            if (selectedCells.length !== 1) {
                showModal("ğŸ¤”", "å›ç­”ã‚¨ãƒ©ãƒ¼", "ç­”ãˆã ã¨æ€ã†ã‚»ãƒ«ã‚’ã€Œ1ã¤ã ã‘ã€é¸æŠã—ã¦ã‹ã‚‰æå‡ºã—ã¦ãã ã•ã„ã€‚", false);
                return;
            }
            const cell = cells[selectedCells[0].r][selectedCells[0].c];
            const val = cell.textContent;
            const stage = stages[currentStageIdx];
            
            // æ•°å€¤å¤‰æ›ã§ãã‚‹å ´åˆã¯æ•°å€¤ã§ã€ã§ããªã„å ´åˆã¯æ–‡å­—åˆ—ã§æ¯”è¼ƒ
            const numericVal = parseFloat(val);
            const finalVal = isNaN(numericVal) ? val : numericVal;

            if (stage.check(finalVal)) {
                showModal("ğŸ¯", "æ­£è§£ã§ã™ï¼", "åˆ†ææˆåŠŸã§ã™ï¼æ­£ã—ã„è«–ç†ã§è¨ˆç®—ã—ã€ç­”ãˆã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚", true);
            } else {
                showModal("âŒ", "ä¸æ­£è§£...", "é¸æŠã—ãŸã‚»ãƒ«ãŒæ­£è§£ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è¨ˆç®—éç¨‹ã‚„é †ä½ã‚’ã‚‚ã†ä¸€åº¦ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚");
            }
        });

        function showModal(icon, title, msg, success) {
            const overlay = document.getElementById('overlay');
            const btn = document.getElementById('overlay-btn');
            document.getElementById('overlay-icon').textContent = icon;
            document.getElementById('overlay-title').textContent = title;
            document.getElementById('overlay-message').textContent = msg;
            
            btn.onclick = () => {
                overlay.classList.add('hidden');
                if (success) {
                    if (currentStageIdx < stages.length - 1) {
                        currentStageIdx++;
                        stageSelect.value = currentStageIdx;
                        initStage();
                    } else {
                        location.reload();
                    }
                }
            };
            btn.textContent = success ? (currentStageIdx === stages.length - 1 ? "æœ€åˆã«æˆ»ã‚‹" : "æ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã¸") : "ã‚„ã‚Šç›´ã™";
            overlay.classList.remove('hidden');
        }

        initStage();
    </script>
</body>
</html>